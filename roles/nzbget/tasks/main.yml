- name: nzbget docker image
  docker_image:
    name: {{nzbget_image}}
    state: present

- name: nzbget data dir
  file:
    name: /opt/nzbget/
    state: directory
    owner: media
    group: media
    mode: 0755

- name: Start container
  docker_container:
    name: nzbget
    image: {{nzbget_image}}
    ports:
      - "6789:6789"
    networks:
      - name: "containers"
    volumes:
      - "/opt/nzbget:/config"
      - "{{base_dir}}/{{media_dir}}/{{downloads_dir}}:/downloads"
    env:
      PGID: "{{media_uid}}"
      PUID: "{{media_gid}}"
